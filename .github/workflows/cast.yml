name: Cast to Farcaster

on:
    release:
        types: [published]

jobs:
    cast-release-to-farcaster:
        environment: testing
        runs-on: ubuntu-latest
        steps:
            - name: Output Information
              run: |
                  echo "${{ toJSON(github.event.release.html_url) }}"
                  echo "${{ toJSON(github.event.release.body) }}"
            - name: Get code
              uses: actions/checkout@v3
            - name: Cast to Farcaster
              uses: ./.github/actions/cast-to-farcaster
              with:
                  message: "${{ github.event.release.name }}"
                  signer-uuid: ${{ secrets.SIGNER_UUID }}
                  neynar-api-key: ${{ secrets.NEYNAR_API_KEY }}
                  release-url: ${{ github.event.release.html_url }}
                  channel-id: "degenx"
